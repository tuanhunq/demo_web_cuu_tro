<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cá»©u Há»™ ToÃ n Quá»‘c</title>

  <!-- Leaflet & Fonts -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>

  <!-- Main CSS -->
  <link rel="stylesheet" href="styles.css"/>
</head>

<body>
  <!-- ================= HEADER ================= -->
  <header class="topbar">
    <div class="logo">
      <img src="assets/logo.png" alt="Logo" />
      <h1>Cá»©u Há»™</h1>
    </div>

    <div class="filters">
      <input type="text" id="searchInput" placeholder="ğŸ” TÃ¬m kiáº¿m sá»± kiá»‡n..." />
      <select id="provinceSelect">
        <option value="">-- Chá»n tá»‰nh / thÃ nh phá»‘ --</option>
        <option value="HÃ  Ná»™i">HÃ  Ná»™i</option>
        <option value="Há»“ ChÃ­ Minh">Há»“ ChÃ­ Minh</option>
        <option value="Háº£i PhÃ²ng">Háº£i PhÃ²ng</option>
        <option value="ÄÃ  Náºµng">ÄÃ  Náºµng</option>
        <option value="Cáº§n ThÆ¡">Cáº§n ThÆ¡</option>
        <option value="An Giang">An Giang</option>
        <option value="BÃ  Rá»‹a - VÅ©ng TÃ u">BÃ  Rá»‹a - VÅ©ng TÃ u</option>
        <option value="Báº¯c Giang">Báº¯c Giang</option>
        <option value="Báº¯c Káº¡n">Báº¯c Káº¡n</option>
        <option value="Báº¡c LiÃªu">Báº¡c LiÃªu</option>
        <option value="Báº¯c Ninh">Báº¯c Ninh</option>
        <option value="Báº¿n Tre">Báº¿n Tre</option>
        <option value="BÃ¬nh DÆ°Æ¡ng">BÃ¬nh DÆ°Æ¡ng</option>
        <option value="BÃ¬nh Äá»‹nh">BÃ¬nh Äá»‹nh</option>
        <option value="BÃ¬nh PhÆ°á»›c">BÃ¬nh PhÆ°á»›c</option>
        <option value="BÃ¬nh Thuáº­n">BÃ¬nh Thuáº­n</option>
        <option value="CÃ  Mau">CÃ  Mau</option>
        <option value="Cao Báº±ng">Cao Báº±ng</option>
        <option value="Äáº¯k Láº¯k">Äáº¯k Láº¯k</option>
        <option value="Äáº¯k NÃ´ng">Äáº¯k NÃ´ng</option>
        <option value="Äiá»‡n BiÃªn">Äiá»‡n BiÃªn</option>
        <option value="Äá»“ng Nai">Äá»“ng Nai</option>
        <option value="Äá»“ng ThÃ¡p">Äá»“ng ThÃ¡p</option>
        <option value="Gia Lai">Gia Lai</option>
        <option value="HÃ  Giang">HÃ  Giang</option>
        <option value="HÃ  Nam">HÃ  Nam</option>
        <option value="HÃ  TÄ©nh">HÃ  TÄ©nh</option>
        <option value="Háº£i DÆ°Æ¡ng">Háº£i DÆ°Æ¡ng</option>
        <option value="Háº­u Giang">Háº­u Giang</option>
        <option value="HÃ²a BÃ¬nh">HÃ²a BÃ¬nh</option>
        <option value="HÆ°ng YÃªn">HÆ°ng YÃªn</option>
        <option value="KhÃ¡nh HÃ²a">KhÃ¡nh HÃ²a</option>
        <option value="KiÃªn Giang">KiÃªn Giang</option>
        <option value="Kon Tum">Kon Tum</option>
        <option value="Lai ChÃ¢u">Lai ChÃ¢u</option>
        <option value="LÃ¢m Äá»“ng">LÃ¢m Äá»“ng</option>
        <option value="Láº¡ng SÆ¡n">Láº¡ng SÆ¡n</option>
        <option value="LÃ o Cai">LÃ o Cai</option>
        <option value="Long An">Long An</option>
        <option value="Nam Äá»‹nh">Nam Äá»‹nh</option>
        <option value="Nghá»‡ An">Nghá»‡ An</option>
        <option value="Ninh BÃ¬nh">Ninh BÃ¬nh</option>
        <option value="Ninh Thuáº­n">Ninh Thuáº­n</option>
        <option value="PhÃº Thá»">PhÃº Thá»</option>
        <option value="PhÃº YÃªn">PhÃº YÃªn</option>
        <option value="Quáº£ng BÃ¬nh">Quáº£ng BÃ¬nh</option>
        <option value="Quáº£ng Nam">Quáº£ng Nam</option>
        <option value="Quáº£ng NgÃ£i">Quáº£ng NgÃ£i</option>
        <option value="Quáº£ng Ninh">Quáº£ng Ninh</option>
        <option value="Quáº£ng Trá»‹">Quáº£ng Trá»‹</option>
        <option value="SÃ³c TrÄƒng">SÃ³c TrÄƒng</option>
        <option value="SÆ¡n La">SÆ¡n La</option>
        <option value="TÃ¢y Ninh">TÃ¢y Ninh</option>
        <option value="ThÃ¡i BÃ¬nh">ThÃ¡i BÃ¬nh</option>
        <option value="ThÃ¡i NguyÃªn">ThÃ¡i NguyÃªn</option>
        <option value="Thanh HÃ³a">Thanh HÃ³a</option>
        <option value="Thá»«a ThiÃªn Huáº¿">Thá»«a ThiÃªn Huáº¿</option>
        <option value="Tiá»n Giang">Tiá»n Giang</option>
        <option value="TrÃ  Vinh">TrÃ  Vinh</option>
        <option value="TuyÃªn Quang">TuyÃªn Quang</option>
        <option value="VÄ©nh Long">VÄ©nh Long</option>
        <option value="VÄ©nh PhÃºc">VÄ©nh PhÃºc</option>
        <option value="YÃªn BÃ¡i">YÃªn BÃ¡i</option>
      </select>
      <button id="filterBtn">âš™ï¸</button>
    </div>

    <nav class="menu">
      <a href="index.html">Trang chá»§</a>
      <a href="#">Báº£n Ä‘á»“</a>
      <a href="report.html">BÃ¡o tin</a>
      <a href="#">LiÃªn há»‡</a>
      <a href="dangnhap.html" id="loginBtn">ÄÄƒng nháº­p</a>
    </nav>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="filterTabs">
        <button class="active">Táº¥t cáº£</button>
        <button>ğŸ†˜ Cáº§n cá»©u</button>
        <button>ğŸš‘ Äá»™i cá»©u há»™</button>
        <button>âš ï¸ Cáº£nh bÃ¡o</button>
      </div>

      <div id="reportList" class="report-list">
        <div class="report-card">
          <span class="tag need">Cáº§n cá»©u</span>
          <h4>Khu vá»±c Nam Äá»‹nh</h4>
          <p>NÆ°á»›c ngáº­p cao, cáº§n há»— trá»£ ngÆ°á»i giÃ  vÃ  tráº» nhá».</p>
        </div>

        <div class="report-card">
          <span class="tag rescue">Äá»™i cá»©u há»™</span>
          <h4>Äá»™i Cá»©u Há»™ Miá»n Báº¯c</h4>
          <p>Äang di chuyá»ƒn Ä‘áº¿n khu vá»±c bá»‹ áº£nh hÆ°á»Ÿng.</p>
        </div>

        <div class="report-card">
          <span class="tag warning">Cáº£nh bÃ¡o</span>
          <h4>MÆ°a lá»›n kÃ©o dÃ i</h4>
          <p>Äá» phÃ²ng sáº¡t lá»Ÿ táº¡i khu vá»±c Ä‘á»“i nÃºi.</p>
        </div>
      </div>

      <button class="btn-submit">ğŸ“ Gá»­i pháº£n Ã¡nh</button>
    </aside>

    <!-- Map Section -->
    <section class="map-section">
      <div id="map"></div>

      <div class="map-floating">
        <button class="float-btn">ğŸ•“ 24h</button>
        <button class="float-btn" id="fullscreenMapBtn">ğŸ—ºï¸</button>
        <button class="float-btn" id="locateBtn">ğŸ“</button>
      </div>
    </section>
  </main>

  <!-- ================= LEAFLET JS ================= -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- ================= MAIN SCRIPT ================= -->
  <script>
    // ====== MAP INIT ======
    const map = L.map("map").setView([16.0471, 108.206], 6);
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap'
    }).addTo(map);

    // Marker máº·c Ä‘á»‹nh toÃ n quá»‘c
    const defaultMarker = L.marker([21.0278, 105.8342])
      .addTo(map)
      .bindPopup("<b>ğŸ†˜ Trung tÃ¢m cá»©u há»™ HÃ  Ná»™i</b><br>LiÃªn há»‡ ngay Ä‘á»ƒ há»— trá»£.")
      .openPopup();

    // Dá»¯ liá»‡u toáº¡ Ä‘á»™ trung tÃ¢m cÃ¡c tá»‰nh
    const provinces = {
  "An Giang": [10.5216, 105.1259],
  "BÃ  Rá»‹a - VÅ©ng TÃ u": [10.5417, 107.2429],
  "Báº¡c LiÃªu": [9.2940, 105.7278],
  "Báº¯c Giang": [21.2730, 106.1946],
  "Báº¯c Káº¡n": [22.1440, 105.8348],
  "Báº¯c Ninh": [21.1861, 106.0763],
  "Báº¿n Tre": [10.2415, 106.3753],
  "BÃ¬nh DÆ°Æ¡ng": [11.1730, 106.6710],
  "BÃ¬nh Äá»‹nh": [13.7820, 109.2190],
  "BÃ¬nh PhÆ°á»›c": [11.7512, 106.7235],
  "BÃ¬nh Thuáº­n": [10.9333, 108.1000],
  "CÃ  Mau": [9.1768, 105.1524],
  "Cao Báº±ng": [22.6653, 106.2570],
  "Cáº§n ThÆ¡": [10.0452, 105.7469],
  "ÄÃ  Náºµng": [16.0678, 108.2208],
  "Äáº¯k Láº¯k": [12.7100, 108.2378],
  "Äáº¯k NÃ´ng": [12.2646, 107.6098],
  "Äiá»‡n BiÃªn": [21.3860, 103.0170],
  "Äá»“ng Nai": [10.9453, 107.0042],
  "Äá»“ng ThÃ¡p": [10.4930, 105.6882],
  "Gia Lai": [13.9833, 108.0000],
  "HÃ  Giang": [22.8233, 104.9836],
  "HÃ  Nam": [20.5411, 105.9210],
  "HÃ  Ná»™i": [21.0285, 105.8542],
  "HÃ  TÄ©nh": [18.3428, 105.9057],
  "Háº£i DÆ°Æ¡ng": [20.9393, 106.3306],
  "Háº£i PhÃ²ng": [20.8449, 106.6881],
  "Háº­u Giang": [9.7845, 105.4701],
  "HÃ²a BÃ¬nh": [20.8172, 105.3376],
  "HÆ°ng YÃªn": [20.6464, 106.0511],
  "KhÃ¡nh HÃ²a": [12.2585, 109.0526],
  "KiÃªn Giang": [10.0077, 105.0809],
  "Kon Tum": [14.3545, 108.0076],
  "Lai ChÃ¢u": [22.4000, 103.4500],
  "LÃ¢m Äá»“ng": [11.9404, 108.4583],
  "Láº¡ng SÆ¡n": [21.8537, 106.7615],
  "LÃ o Cai": [22.4800, 103.9700],
  "Long An": [10.6956, 106.2431],
  "Nam Äá»‹nh": [20.4337, 106.1773],
  "Nghá»‡ An": [18.6733, 105.6926],
  "Ninh BÃ¬nh": [20.2500, 105.9740],
  "Ninh Thuáº­n": [11.5650, 108.9886],
  "PhÃº Thá»": [21.3227, 105.1066],
  "PhÃº YÃªn": [13.0882, 109.0929],
  "Quáº£ng BÃ¬nh": [17.4833, 106.6000],
  "Quáº£ng Nam": [15.5394, 108.0191],
  "Quáº£ng NgÃ£i": [15.1205, 108.7923],
  "Quáº£ng Ninh": [21.0064, 107.2925],
  "Quáº£ng Trá»‹": [16.8163, 107.1003],
  "SÃ³c TrÄƒng": [9.6000, 105.9719],
  "SÆ¡n La": [21.3280, 103.9143],
  "TÃ¢y Ninh": [11.3100, 106.0980],
  "ThÃ¡i BÃ¬nh": [20.4500, 106.3400],
  "ThÃ¡i NguyÃªn": [21.5930, 105.8480],
  "Thanh HÃ³a": [19.8075, 105.7760],
  "Thá»«a ThiÃªn Huáº¿": [16.4637, 107.5909],
  "Tiá»n Giang": [10.3664, 106.3587],
  "TrÃ  Vinh": [9.9347, 106.3450],
  "TuyÃªn Quang": [21.8230, 105.2180],
  "VÄ©nh Long": [10.2560, 105.9588],
  "VÄ©nh PhÃºc": [21.3090, 105.6060],
  "YÃªn BÃ¡i": [21.7168, 104.8986],
  "TP. Há»“ ChÃ­ Minh": [10.7769, 106.7009]
};


    let provinceMarker = null;
    let currentProvince = "";
    const provinceSelect = document.getElementById("provinceSelect");

    provinceSelect.addEventListener("change", () => {
      const selectedProvince = provinceSelect.value;

      if (selectedProvince === currentProvince || !selectedProvince) {
        if (provinceMarker) map.removeLayer(provinceMarker);
        currentProvince = "";
        map.setView([16.0471, 108.206], 6);
        defaultMarker.addTo(map);
        return;
      }

      currentProvince = selectedProvince;
      if (map.hasLayer(defaultMarker)) map.removeLayer(defaultMarker);
      if (provinceMarker) map.removeLayer(provinceMarker);

      const coords = provinces[selectedProvince];
      if (coords) {
        provinceMarker = L.marker(coords)
          .addTo(map)
          .bindPopup(`ğŸ“ ${selectedProvince}`)
          .openPopup();
        map.flyTo(coords, 11, { animate: true, duration: 1.5 });
      }
    });

    // ====== Äá»‹nh vá»‹ vá»‹ trÃ­ ngÆ°á»i dÃ¹ng ======
    document.getElementById("locateBtn").addEventListener("click", () => {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const { latitude, longitude } = pos.coords;
          map.flyTo([latitude, longitude], 14);
          L.marker([latitude, longitude]).addTo(map)
            .bindPopup("ğŸ“ Vá»‹ trÃ­ cá»§a báº¡n").openPopup();
        });
      } else alert("TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ Ä‘á»‹nh vá»‹.");
    });
  </script>
</body>
</html>
